<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <!-- Step 1: import the element to test -->
    <link rel="import" href="../fbv-calculator-modal.html">
  </head>
  <body>

    <!-- You can use the document as a place to set up your fixtures. -->
    <fbv-calculator-modal id="fixture1"></fbv-calculator-modal>
    <fbv-calculator-modal id="fixture2"></fbv-calculator-modal>

    <script>
      var myEl = document.querySelector('#fixture1');
      var myEl2 = document.querySelector('#fixture2');
      var count = 0;
        
      suite('Testing the number pad:', function() {
          
        setup(function(){
            myEl._newValue = "";
            console.log('Reset element.');
        });

          
        test('Input a value into the _newValue property', function(){
            myEl.$.number2.click();
            assert.equal(myEl._newValue.replace(/(\r\n|\n|\r)/gm,"").replace(/\s/g,""), '2');
        });
        
        test('Pressing a combination of numbers', function(){
            
            
            myEl.addEventListener('number-pressed', function(event){
                if(count === 0){
                    assert.equal(event.detail.newValue.replace(/(\r\n|\n|\r)/gm,"").replace(/\s/g,""), 2);
                    console.log('Step1');
                } else if (count === 1){
                    assert.equal(event.detail.newValue.replace(/(\r\n|\n|\r)/gm,"").replace(/\s/g,""), 25);
                    console.log('Step2');
                } else if (count === 2){
                    assert.equal(event.detail.newValue.replace(/(\r\n|\n|\r)/gm,"").replace(/\s/g,""), 25);
                    console.log('Step3');
                } else if (count === 3){
                    assert.equal(event.detail.newValue.replace(/(\r\n|\n|\r)/gm,"").replace(/\s/g,""), 25.8);
                    console.log('Step4');
                }
            });
            myEl.$.number2.click();
            count+=1;
            myEl.$.number5.click();
            count+=1;
            myEl.$.number10.click(); 
            count+=1;
            myEl.$.number8.click();
        });
          
        test('Press a number, then a command, then another number and final the equals sign.', function(){
            myEl2.addEventListener('equals-sign-pressed', function(event){
                console.log(event.detail);
                assert.equal(event.detail.value2, 50);
            });
            myEl2.$.number2.click();
            myEl2.$.commandtimes.click();
            myEl2.$.number5.click();
            myEl2.$.number10.click();
            myEl2.$.commandresultado.click();
        });


      });
    </script>

  </body>
</html>
